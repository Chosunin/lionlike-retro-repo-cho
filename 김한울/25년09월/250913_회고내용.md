# 250912 회고

## Q1. 오늘 배운 것 중 기억에 남는 것, 어려웠던 것
### 1. 트랜잭션
  #### - 1. 정의
       - DB 작업들을 하나의 단위로 묶어서 전부 성공하거나 전부 실패하게 보장하는 메커니즘.
       - ACID 원칙을 지켜서 데이터 정합성을 유지함.
 #### - 2. 특징
       - 원자성: 전부 수행되거나 전부 취소.
       - 일관성: 비즈니스 규칙 위배가 없도록 보장.
       - 격리성: 동시에 실행돼도 순차적으로 실행된 것처럼 보장.
       - 지속성: 커밋된 데이터는 장애가 나도 유지
#### - 3. Spring에서의 트랜잭션
       - @Transactional 애노테이션으로 경계를 선언.
       - 메서드 진입 → 트랜잭션 시작, 정상 종료 → 커밋, 예외 발생 → 롤백.
       - DB의 **락(lock)**과 맞물려 동시성 제어에 영향.
       - @Transactional 애노테이션으로 경계를 선언.
       - 메서드 진입 → 트랜잭션 시작, 정상 종료 → 커밋, 예외 발생 → 롤백.
       - DB의 **락(lock)**과 맞물려 동시성 제어에 영향.
### 2. 데드락 
  #### - 1. 정의
       - 두 개 이상의 트랜잭션이 서로가 가진 락을 기다리면서 무한 대기 상태에 빠지는 현상.
       - 예)
         - 트랜잭션 A: row1 락 → row2 필요
         - 트랜잭션 B: row2 락 → row1 필요
         - → 서로 대기 → 데드락 발생
  #### - 2. 발생 조건
       - 상호 배제 (동시에 같은 자원 못 씀)
       - 점유 대기 (자원 쥔 채 다른 자원 대기)
       - 비선점 (자원을 강제로 뺏을 수 없음
       - 순환 대기 (A→B→C→A 대기 고리)
  #### - 3. DB에서의 처리
       - 대부분 DBMS는 데드락 탐지기가 있어서 한쪽 트랜잭션을 강제 롤백시킴.
       - Spring에서는 DeadlockLoserDataAccessException 같은 예외가 발생.

### 3. 트랜잭션 ↔ 데드락 교차점

- 트랜잭션은 락을 통해 동시성 제어를 함.
- 데드락은 그 락이 교차 순서로 잡힐 때 발생.
- 즉, 트랜잭션 없이는 데드락도 없다.

## Q2. 오늘 수업과 회고시간에 대한 느낀 점
- 트랜잭션은 데이터에 안정성을 부여하는 든든한 안전망처럼 보였다.  그런데 아이러니하게도 그 안정성을 지키려는 과정에서 데드락이라는 또 다른 문제가 생긴다는 게 신기했다.  
  하나의 보호 장치가 동시에 위험 요소가 될 수도 있다는 점이 인상 깊었다.  실제로 이 현상들이 어떻게 파악하고 해결하지는 나의 역할이라는 생각이 들었고 잘 해결하고싶기도 하다.
