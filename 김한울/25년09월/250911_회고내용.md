# 250911 회고

## Q1. 오늘 배운 것 중 기억에 남는 것, 어려웠던 것
### 1. 크로스 조인 (CROSS JOIN)
정의: 두 테이블의 모든 행을 곱집합(Cartesian Product)으로 반환하는 조인.
특징: ON 조건을 쓰지 않으면 모든 조합이 나오므로 데이터가 기하급수적으로 늘어남.
예시
```
SELECT *
FROM employees CROSS JOIN departments;
```
→ 모든 직원 × 모든 부서 조합.

### 2. 이너 조인 (INNER JOIN)

정의: 두 테이블에서 조건에 맞는 행만 반환하는 조인. 가장 많이 쓰이는 방식.
특징: 교집합 성격.
예시
```
SELECT e.name, d.dept_name
FROM employees e
INNER JOIN departments d ON e.dept_id = d.id;
```
→ 직원과 해당 부서만 매칭.
### 3. 아우터 조인 (OUTER JOIN)

정의: 조건이 맞지 않아도 한쪽 테이블의 모든 행을 유지하면서 다른 쪽 데이터를 붙임.
종류
LEFT OUTER JOIN: 왼쪽 테이블을 기준으로 다 보여줌.
RIGHT OUTER JOIN: 오른쪽 테이블을 기준으로 다 보여줌.
FULL OUTER JOIN: 양쪽 다 보여줌 (MySQL은 직접 지원 X, UNION으로 대체).

예시
```
SELECT e.name, d.dept_name
FROM employees e
LEFT JOIN departments d ON e.dept_id = d.id;
```
→ 부서 없는 직원도 표시.

### 4. 셀프 조인 (SELF JOIN)

정의: 같은 테이블을 자기 자신과 조인. 계층 구조 표현할 때 유용.
예시
```
SELECT e.name AS 직원, m.name AS 매니저
FROM employees e
JOIN employees m ON e.manager_id = m.id;
```
→ 직원과 매니저가 같은 테이블에 있을 때 사용.

### 5. 서브쿼리 (SUBQUERY)

정의: 쿼리 안에 포함된 또 다른 쿼리.
종류
스칼라 서브쿼리: 단일 값 반환.
인라인 뷰: FROM 절 안에 들어가 테이블처럼 쓰임.
상관 서브쿼리: 외부 쿼리의 값을 내부 쿼리가 참조.
예시
```
SELECT name, salary
FROM employees e
WHERE salary > (
  SELECT AVG(salary) FROM employees WHERE dept_id = e.dept_id
);
```
→ 부서 평균보다 급여 높은 직원 찾기.

### 6. 윈도우 함수 (WINDOW FUNCTION)
#### 윈도우 함수
정의: 그룹화하면서도 행 단위로 결과를 계산할 수 있게 하는 함수.
자주 쓰는 함수
ROW_NUMBER(): 행 번호 부여.
RANK(), DENSE_RANK(): 순위 매기기.
SUM() OVER(...), AVG() OVER(...): 누적 합계, 이동 평균.

예시
```
SELECT name, salary,
       RANK() OVER(PARTITION BY dept_id ORDER BY salary DESC) AS dept_rank
FROM employees;
```
→ 부서별 급여 순위 계산.

#### over() 안에 들어갈 수 있는 것들
##### 1. PARTITION BY
  - 데이터를 그룹 단위로 나눈다.
  - GROUP BY랑 비슷하지만, 집계가 행 단위로 유지됨.
→ 부서별 평균 급여를 구하면서도 직원 개별 행은 그대로 유지.
##### 2. ORDER BY
  - 파티션 내에서 순서를 정의.
  - RANK(), ROW_NUMBER(), LAG(), LEAD() 같은 순위/이전행/다음행 함수에 반드시 필요.
##### 3. ROWS / RANGE
  - 현재 행을 기준으로 계산할 범위(윈도우 프레임) 를 지정.
  - 기본값은 RANGE BETWEEN UNBOUNDED PRECEDING AND CURRENT ROW.
  - ROWS: 행의 개수를 기준으로 범위를 지정.
  - RANGE: 값의 범위를 기준으로 지정.
## Q2. 오늘 수업과 회고시간에 대한 느낀 점

 가장 먼저 느낀 건 조인의 복잡함이었다.  
INNER, OUTER, SELF 조인을 사용할 때 마다 어떤 조건에서 어떤 데이터를 가져오는지 헷갈렸다.  
하지만 이 과정을 거치면서 데이터 간 관계를 정확히 이해하는 것이 얼마나 중요한지 깨닫게 되었다.  
반대로 윈도우 함수를 배우면서는 큰 편리함을 느꼈다.  
기존에는 서브쿼리나 그룹화를 여러 번 써야 했던 문제들을, OVER() 한 줄로 해결할 수 있다는 사실이 신선했다. 누적합, 순위, 평균을 행 단위로 그대로 유지하면서 계산할 수 있다는 점은 실무 데이터 분석에도 적용해야겠다는 생각을 가지게됐다.
